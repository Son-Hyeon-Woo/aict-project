import{u as S}from"./index-7ffb8750.js";import{V as w,q as m,t as C,p as h,r as v,v as z,o as p}from"./vuetify-38175f63.js";import{o as b,v as x,e,m as N,x as V,aG as D,r as c,aN as k,aR as R,l,u as g,i as I,F as q}from"./@vue-358a9f7c.js";import{A}from"./agGridTable-d1cd5430.js";import{b as B}from"./vue-router-c26e01f6.js";import"./@iconify-319cce74.js";import"./axios-9d43f49d.js";import"./apexcharts-clevision-bbcd5403.js";import"./axios-mock-adapter-5e48edef.js";import"./fast-deep-equal-6efe4724.js";import"./is-buffer-7d84b7d6.js";import"./pinia-f5faf949.js";import"./vue-demi-71ba0ef2.js";import"./layout-with-vertical-nav_v240827-5d983db7.js";import"./vue3-perfect-scrollbar-ac907acf.js";import"./perfect-scrollbar-c9c56521.js";import"./@vueuse-36fea5a4.js";import"./ag-grid-community-afd81849.js";import"./ag-grid-vue3-6356d667.js";const j={class:"d-flex align-center"},F={__name:"PageTitle",props:{title:{type:String,required:!0,default:()=>""},fontSize:{type:String,default:()=>"1rem"},fontWeight:{type:String,default:()=>"500"},icon:{type:String,default:()=>"hugeicons:menu-square"}},setup(f){const i=f;return(u,s)=>(b(),x("div",j,[e(w,{icon:i.icon,class:"me-2"},null,8,["icon"]),N("span",{style:D([{fontSize:i.fontSize,fontWeight:i.fontWeight},{"line-height":"0"}])},V(i.title),5)]))}};const le={__name:"mail-list",setup(f){const u=S().getAxiosInstance(),s=c([]),a=c(!1),y=c([{headerName:"메일번호",field:"emailNo",headerClass:"font-size-9 font-weight-bold bg-skyblue",enableCellChangeFlash:!0,cellStyle:{"text-align":"center"}},{headerName:"제목",field:"subject",headerClass:"font-size-9 font-weight-bold bg-lightgreen",cellStyle:{"text-align":"center"}},{headerName:"보낸사람",field:"sender",headerClass:"font-size-9 font-weight-bold bg-lightgreen",cellStyle:{"text-align":"center"}},{headerName:"받는사람",field:"recipients",headerClass:"font-size-9 font-weight-bold bg-lightgreen",cellStyle:{"text-align":"center"}},{headerName:"첨부파일",field:"attachments",headerClass:"font-size-9 font-weight-bold bg-lightgreen",cellStyle:{"text-align":"center"}},{headerName:"수신일자",field:"receivedDate",headerClass:"font-size-9 font-weight-bold bg-lightgreen",cellStyle:{"text-align":"center"}},{headerName:"처리상태",field:"processResult",headerClass:"font-size-9 font-weight-bold bg-lightred",cellStyle:{"text-align":"center"}},{headerName:"위험수준",field:"riskLevel",headerClass:"font-size-9 font-weight-bold bg-lightred",cellStyle:{"text-align":"center"}},{headerName:"위험내용",field:"riskDetail",headerClass:"font-size-9 font-weight-bold bg-lightred",cellStyle:{"text-align":"center"}},{headerName:"탐지일자",field:"detectionDate",headerClass:"font-size-9 font-weight-bold bg-lightred",cellStyle:{"text-align":"center"}}]),n=async()=>{try{const o={},t=await u.get("recent-emails",o);s.value=t.data.data.emails}catch(o){console.error("Error fetching data:",o)}};let r=null;k(()=>{n(),r=setInterval(n,1e3)}),R(()=>{r&&clearInterval(r)}),B();const _=o=>{o.data.processResult==="차단"?a.value=!0:alert("이미 전송된 메일입니다.")};return(o,t)=>(b(),x(q,null,[e(m,null,{default:l(()=>[e(h,{cols:"12",class:"px-2"},{default:l(()=>[e(v,{class:"pa-4",elevation:"12",rounded:""},{default:l(()=>[e(m,null,{default:l(()=>[e(h,{cols:"12",lg:"4",class:"pb-0 d-flex align-start justify-center justify-lg-start"},{default:l(()=>[e(F,{title:"실시간 메일 처리 목록",icon:"hugeicons:menu-square","font-size":"1.2rem","font-weight":"500"})]),_:1})]),_:1}),e(A,{"row-data":g(s),"col-defs":g(y),"pagination-page-size":15,"pagination-page-size-selector":[15,20,30,40,50],"loading-message":"데이터 로딩 중...","fetch-data":n,"on-cell-double-click":_},null,8,["row-data","col-defs"])]),_:1})]),_:1})]),_:1}),e(C,{modelValue:g(a),"onUpdate:modelValue":t[2]||(t[2]=d=>I(a)?a.value=d:null),width:"auto"},{default:l(()=>[e(z,{"max-width":"400","prepend-icon":"mdi-update",text:"메일의 상세 정보를 확인할 수 있습니다.",title:"메일 상세"},{actions:l(()=>[e(p,{class:"ms-auto",color:"error",text:"차단",onClick:t[0]||(t[0]=d=>a.value=!1)}),e(p,{text:"전송",onClick:t[1]||(t[1]=d=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"])],64))}};export{le as default};
